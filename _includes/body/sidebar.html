<hy-drawer
  id="_drawer"
  class="{% if include.cover %}cover{% endif %}"
  side="left"
  threshold="10"
  noscroll
  {% if include.cover or site.sidebar_drawer_opened %}opened{% endif %}
>
  <header id="_sidebar" class="sidebar{% if include.invert %} invert{% endif %}" role="banner">
    {% include_cached body/sidebar-bg.html image=include.image color=include.color theme_color=include.theme_color %}
    {% include_cached body/sidebar-sticky.html %}
  </header>
</hy-drawer>
{% if site.sidebar_drawer_opened %}
<script>
  (function () {
    var drawer = document.getElementById('_drawer');
    if (!drawer) return;

    var mobileQuery = window.matchMedia('(max-width: 63.99em)');

    var openDrawerOnMobile = function () {
      if (!mobileQuery.matches) return;

      if (typeof drawer.open === 'function') {
        drawer.open();
        return;
      }

      if (typeof drawer.toggle === 'function') {
        drawer.toggle(true);
        return;
      }

      drawer.setAttribute('opened', '');
    };

    var run = function () {
      openDrawerOnMobile();
      window.setTimeout(openDrawerOnMobile, 260);
    };

    if (drawer.classList.contains('loaded')) {
      run();
    } else {
      drawer.addEventListener('hy-drawer-init', run, { once: true });
    }
  })();
</script>
{% endif %}
<hr class="sr-only" hidden />
