---
layout:   post
title:    "Spring Reactive Web Applications: Reactor 1ë¶€"
subtitle: "Spring Reactive Web Applications: Reactor 1ë¶€"
category: Spring
more_posts: posts.md
tags:     Spring
---
# [Spring-Reactive] ë¦¬ì•¡í‹°ë¸Œ ì‹œìŠ¤í…œê³¼ ë¦¬ì•¡í‹°ë¸Œ í”„ë¡œê·¸ë˜ë°

<!--more-->
<!-- Table of contents -->
* this unordered seed list will be replaced by the toc
{:toc}

<!-- text -->

## ë¦¬ì•¡í‹°ë¸Œ ì‹œìŠ¤í…œì´ë€?
> ë³€í™”ì— ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•˜ê³ (Responsive), ì‹¤íŒ¨ì— ê°•í•˜ë©°(Resilient), ë¶€í•˜ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ í™•ì¥ë˜ê³ (Elastic), ë©”ì‹œì§€ ê¸°ë°˜(Message Driven)ìœ¼ë¡œ êµ¬ì„±ëœ ì‹œìŠ¤í…œì„ ë§í•œë‹¤.  
(ì¦‰, ì•ˆì •ì ì´ê³  ìœ ì—°í•˜ë©° ë¹ ë¥¸ ì‘ë‹µì„ ë³´ì¥í•˜ëŠ” í˜„ëŒ€ì ì¸ ì‹œìŠ¤í…œ ì„¤ê³„ ë°©ì‹)

## ë¦¬ì•¡í‹°ë¸Œ ì„ ì–¸ë¬¸
> ë¦¬ì•¡í‹°ë¸Œ ì„ ì–¸ë¬¸ì€ ì´ë™í‹°ë¸Œë¼ëŠ” ìš©ì–´ì˜ ì˜ë¯¸ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì •ì˜í•˜ê¸° ìœ„í•´ ë…¸ë ¥í•˜ëŠ” ì‚¬ëŒë“¤ì´ ë§Œë“  ë¦¬ì•¡í‹°ë¸Œ ì‹œìŠ¤í…œ êµ¬ì¶•ì„ ìœ„í•œ ì¼ì¢…ì˜ ì„¤ê³„ ì›ì¹™

![img.png](img.png)

| í•­ëª©         |ê°„ë‹¨ ì •ì˜|ì˜ˆì‹œ ë˜ëŠ” ê´€ë ¨ íŠ¹ì„±|
|------------|---|---|
| VALUE (ê°€ì¹˜) | ìš°ë¦¬ê°€ ë¦¬ì•¡í‹°ë¸Œ ì‹œìŠ¤í…œì—ì„œ ì–»ê³ ì í•˜ëŠ” ìµœì¢… ëª©í‘œ | Responsive (ì‘ë‹µì„±) â€“ ë¹ ë¥´ê³  ì•ˆì •ì ì¸ ì‘ë‹µ|
 | FORM (í˜•ì‹)  | ê·¸ ê°€ì¹˜ë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•œ ì‹œìŠ¤í…œì˜ êµ¬ì¡°ì  ì„±ì§ˆ | Elastic (íƒ„ë ¥ì„±), Resilient (íšŒë³µì„±)|
 | MEANS (ìˆ˜ë‹¨) | í˜•ì‹ì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ êµ¬ì²´ì ì¸ ì‹¤í–‰ ìˆ˜ë‹¨ | Message Driven (ë©”ì‹œì§€ ê¸°ë°˜) ì•„í‚¤í…ì²˜|

## ë¦¬ì•¡í‹°ë¸Œ í”„ë¡œê·¸ë˜ë°ì˜ íŠ¹ì§•
- `ì„ ì–¸í˜• í”„ë¡œê·¸ë˜ë° ë°©ì‹` : ë™ì‘ì„ ì–´ë–»ê²Œ ìˆ˜í–‰í• ì§€ë¥¼ ëª…ë ¹í•˜ì§€ ì•Šê³ , ë¬´ì—‡ì„ í• ì§€ë§Œ ì„ ì–¸í•¨
  - â†’ ì½”ë“œê°€ ê°„ê²°í•˜ê³  ì˜ë„ë¥¼ ëª…í™•í•˜ê²Œ í‘œí˜„

```java
// ëª…ë ¹í˜•(forë¬¸ì„ ëŒì•„ë¼, Aë¡œ ì‹œì‘ë˜ëŠ”ê±¸ ì°¾ì•„ì„œ ë„£ì–´ë¼)
List<String> result = new ArrayList<>();
for(String s : list) {
    if(s.startsWith("A")) result.add(s);
}

// ì„ ì–¸í˜•(Aë¡œ ì‹œì‘ë˜ëŠ”ê±¸ í•„í„°ë§ í•œë‹¤)
List<String> result = list.stream()
        .filter(s -> s.startsWith("A"))
        .toList();
```

- `ë°ì´í„° ìŠ¤íŠ¸ë¦¼(data streams)` : ë°ì´í„°ê°€ ì§€ì†ì ìœ¼ë¡œ íë¦„
  - â†’ ì‹œê°„ì˜ íë¦„ì— ë”°ë¼ ë°œìƒí•˜ëŠ” ë°ì´í„°ë¥¼ ì²˜ë¦¬

```java
// ì˜ˆì‹œ : ì„¼ì„œì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ì˜¨ë„ê°€ ë“¤ì–´ì˜¤ëŠ” ê²½ìš°, Flux<Integer> ë¡œ 1ì´ˆë§ˆë‹¤ ì˜¨ë„ ê°’ ìˆ˜ì‹ 
Flux.interval(Duration.ofSeconds(1))
    .map(tick -> getTemperatureFromSensor())
    .subscribe(temp -> System.out.println("í˜„ì¬ ì˜¨ë„: " + temp));
```

- `ë³€í™”ì˜ ì „íŒŒ(propagation of change)` : ë°ì´í„°ì— ë³€í™”ê°€ ìƒê¸°ë©´ ìë™ìœ¼ë¡œ ê´€ë ¨ëœ ì—°ì‚°ì— ì „íŒŒ
  - â†’ ì´ë²¤íŠ¸ ê¸°ë°˜ ë°˜ì‘ ì²˜ë¦¬ ê°€ëŠ¥

```java
// ì˜ˆì‹œ : ì‚¬ìš©ìì˜ ì´ë¦„ì´ ë°”ë€Œë©´, UI í™”ë©´ì— ìë™ìœ¼ë¡œ ë°˜ì˜
BehaviorSubject<String> username = BehaviorSubject.createDefault("Alice");

username.subscribe(name -> System.out.println("ì´ë¦„ ë³€ê²½ë¨: " + name));

username.onNext("Bob"); // onNextë¥¼ í†µí•´ 'Bob' ì…ë ¥ì‹œ 'ì´ë¦„ ë³€ê²½ë¨: Bob' ë‚´ìš©ì´ ìë™ìœ¼ë¡œ ì¶œë ¥ëœë‹¤.
```

## ë¦¬ì•¡í‹°ë¸Œ í”„ë¡œê·¸ë˜ë° ì½”ë“œ êµ¬ì„±

| êµ¬ì„± ìš”ì†Œ       | ì—­í•  ìš”ì•½|
|-------------|---|
| Publisher   | ë°ì´í„°ë¥¼ ë°œí–‰í•¨ (ìƒì‚°ì ì—­í• )|
 | Subscriber  | ë°ì´í„°ë¥¼ êµ¬ë…í•˜ê³  ì†Œë¹„í•¨ (ì†Œë¹„ì ì—­í• )|
 | Data Source | Publisherì— ì…ë ¥ë˜ëŠ” ì‹¤ì œ ì›ì²œ ë°ì´í„°|
 | Operator    | Publisher â†’ Subscriber ì‚¬ì´ì—ì„œ ë°ì´í„° ë³€í™˜/ê°€ê³µ|

```java
Flux<Integer> source = Flux.range(1, 5);              // Data Source + Publisher
Flux<Integer> mapped = source.map(i -> i * 10);       // Operator(ë°ì´í„°ë¥¼ ê°€ê³µ: 1 â†’ 10, 2 â†’ 20 ...)
mapped.subscribe(System.out::println);                // Subscriber(ê°€ê³µëœ ë°ì´í„°ë¥¼ ì†Œë¹„)
```

## ë¦¬ì•¡í‹°ë¸Œ ìŠ¤íŠ¸ë¦¼ì¦ˆë€?
> ë¦¬ì•¡í‹°ë¸Œ ìŠ¤íŠ¸ë¦¼ì¦ˆëŠ” ë°ì´í„° ìŠ¤íŠ¸ë¦¼ì„ ë¹„ë™ê¸°Â·ë…¼ë¸”ë¡œí‚¹ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ í‘œì¤€ì´ë©°, RxJava, Reactor(Spring Frameworkì™€ ê¶í•©ì´ ì¢‹ë‹¤) ë“±ì´ ëŒ€í‘œ êµ¬í˜„ì²´ë‹¤.

### ë¦¬ì•¡í‹°ë¸Œ ìŠ¤íŠ¸ë¦¼ì¦ˆ êµ¬ì„±ìš”ì†Œ ìš”ì•½
- **Publisher**: ë°ì´í„°ë¥¼ ìƒì„±í•˜ê³  ì „ë‹¬(ë°œí–‰)í•˜ëŠ” ì—­í• .
- **Subscriber**: Publisherë¡œë¶€í„° ì „ë‹¬ë°›ì€ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì—­í• .
- **Subscription**: Subscriberê°€ ìš”ì²­í•  ë°ì´í„° ê°œìˆ˜ë¥¼ ì§€ì •í•˜ê³  êµ¬ë…ì„ ì·¨ì†Œí•˜ëŠ” ì—­í• .
- **Processor**: Publisherì´ë©´ì„œ Subscriber ì—­í• ë„ í•¨ê»˜ í•˜ëŠ” ì¤‘ê°„ ì²˜ë¦¬ì.

**ë™ì‘ íë¦„ ìš”ì•½**  
1. Subscriberê°€ Publisherë¥¼ êµ¬ë…(`subscribe`)í•œë‹¤.
2. Publisherê°€ êµ¬ë… ì¤€ë¹„ ì™„ë£Œë¥¼ ì•Œë¦°ë‹¤(`onSubscribe`).
3. Subscriberê°€ í•„ìš”í•œ ë°ì´í„° ê°œìˆ˜ë¥¼ ìš”ì²­í•œë‹¤(`request`).
4. Publisherê°€ ìš”ì²­í•œ ë§Œí¼ ë°ì´í„°ë¥¼ ì „ë‹¬í•œë‹¤(`onNext`).
5. ë°ì´í„°ê°€ ëª¨ë‘ ì „ë‹¬ë˜ë©´ ì™„ë£Œë¥¼ ì•Œë¦°ë‹¤(`onComplete`), ì—ëŸ¬ ë°œìƒ ì‹œ(`onError`) ì•Œë¦°ë‹¤.

#### ë¦¬ì•¡í‹°ë¸Œ ìŠ¤íŠ¸ë¦¼ì¦ˆ êµ¬ì„±ìš”ì†Œ ì½”ë“œ ì˜ˆì‹œ

**Publisher**  
- Subscriberë¥¼ ë“±ë¡ë°›ê³  ë°ì´í„°ë¥¼ ë°œí–‰í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤.
```java
public interface Publisher<T> {
    public void subscribe(Subscriber<? super T> s);
}
```

**Subscriber**  
- Publisherê°€ ë°œí–‰í•œ ë°ì´í„°ë¥¼ ë°›ì•„ ì²˜ë¦¬í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤.
```java
public interface Subscriber<T> {
    public void onSubscribe(Subscription s); // êµ¬ë… ì‹œì‘, Subscription ìˆ˜ì‹ .
    public void onNext(T t); // ë°ì´í„° ìˆ˜ì‹ .
    public void onError(Throwable t); // ì—ëŸ¬ ì²˜ë¦¬.
    public void onComplete(); // ë°ì´í„° ì†¡ì‹  ì™„ë£Œ ì•Œë¦¼.
}

```

**Subscription**
- ë°ì´í„° ìš”ì²­ëŸ‰ì„ ì œì–´í•˜ê±°ë‚˜ êµ¬ë…ì„ ì·¨ì†Œí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤.

```java
public interface Subscription {
    public void request(long n);
    public void cancel();
}
```

**í†µí•© ì˜ˆì‹œ**  

|ì»´í¬ë„ŒíŠ¸ | ì—­í• |
|---|---|
|MyPublisher | 1~5ê¹Œì§€ ë°ì´í„°ë¥¼ ë°œí–‰|
|MyProcessor | ë°ì´í„°ë¥¼ 10ë°°ë¡œ ê°€ê³µ|
|MySubscriber | ê°€ê³µëœ ë°ì´í„°ë¥¼ ë°›ì•„ ì¶œë ¥|
|Subscription | ëª‡ ê°œì˜ ë°ì´í„°ë¥¼ ë°›ì„ì§€ ìš”ì²­í•˜ê³  ê´€ë¦¬|


```java
import org.reactivestreams.*;

// ë©”ì¸ ì‹¤í–‰ í´ë˜ìŠ¤
public class SimpleExample {
    public static void main(String[] args) {
        Publisher<Integer> publisher = new MyPublisher(); // ë°ì´í„° ë§Œë“œëŠ” Publisher
        Processor<Integer, Integer> processor = new MyProcessor(); // ì¤‘ê°„ ê°€ê³µí•˜ëŠ” Processor
        Subscriber<Integer> subscriber = new MySubscriber(); // ìµœì¢… ì†Œë¹„í•˜ëŠ” Subscriber

        publisher.subscribe(processor); // Processorê°€ Publisherë¥¼ êµ¬ë…
        processor.subscribe(subscriber); // Subscriberê°€ Processorë¥¼ êµ¬ë…
    }
}

// ë°ì´í„°ë¥¼ ë°œí–‰í•˜ëŠ” Publisher
class MyPublisher implements Publisher<Integer> {
    @Override
    public void subscribe(Subscriber<? super Integer> subscriber) {
        // â­ Subscription ê°ì²´ ìƒì„± â­
        Subscription subscription = new Subscription() {
            @Override
            public void request(long n) { // ë°ì´í„° nê°œ ìš”ì²­ ì²˜ë¦¬
                for (int i = 1; i <= n; i++) {
                    subscriber.onNext(i); // ë°ì´í„° í•˜ë‚˜ì”© ë°œí–‰
                }
                subscriber.onComplete(); // ëª¨ë“  ë°ì´í„° ë°œí–‰ í›„ ì™„ë£Œ ì•Œë¦¼
            }

            @Override
            public void cancel() { // êµ¬ë… ì·¨ì†Œ ì‹œ ë™ì‘
                System.out.println("êµ¬ë… ì·¨ì†Œ");
            }
        };
        subscriber.onSubscribe(subscription); // â­ Subscriberì—ê²Œ Subscription ì „ë‹¬ (êµ¬ë… ì‹œì‘ ì•Œë¦¼) â­
    }
}

// ë°ì´í„°ë¥¼ ê°€ê³µí•˜ëŠ” Processor (Publisher + Subscriber ë‘˜ ë‹¤ ì—­í• )
class MyProcessor implements Processor<Integer, Integer> {
    private Subscriber<? super Integer> downstream; // ë‹¤ìŒ Subscriberë¥¼ ì €ì¥

    @Override
    public void subscribe(Subscriber<? super Integer> subscriber) {
        this.downstream = subscriber; // downstream ì €ì¥
    }

    @Override
    public void onSubscribe(Subscription subscription) {
        // â­ Publisherì—ê²Œ ë°ì´í„° 5ê°œë¥¼ ìš”ì²­ â­
        subscription.request(5);
    }

    @Override
    public void onNext(Integer item) {
        downstream.onNext(item * 10); // ë°›ì€ ë°ì´í„° ê°€ê³µ í›„ downstreamì— ì „ë‹¬
    }

    @Override
    public void onError(Throwable t) {
        downstream.onError(t); // ì—ëŸ¬ ì „ë‹¬
    }

    @Override
    public void onComplete() {
        downstream.onComplete(); // ì™„ë£Œ ì‹ í˜¸ ì „ë‹¬
    }
}

// ë°ì´í„°ë¥¼ ì†Œë¹„í•˜ëŠ” Subscriber
class MySubscriber implements Subscriber<Integer> {
    @Override
    public void onSubscribe(Subscription subscription) {
        // â­ Processorì—ê²Œ ë¬´í•œ ë°ì´í„° ìš”ì²­ (Long.MAX_VALUE) â­
        subscription.request(Long.MAX_VALUE);
    }

    @Override
    public void onNext(Integer item) {
        System.out.println("ë°›ì€ ë°ì´í„°: " + item); // ë°›ì€ ë°ì´í„° ì¶œë ¥
    }

    @Override
    public void onError(Throwable t) {
        System.out.println("ì—ëŸ¬: " + t.getMessage()); // ì—ëŸ¬ ì¶œë ¥
    }

    @Override
    public void onComplete() {
        System.out.println("ì™„ë£Œ!"); // ì™„ë£Œ ë©”ì‹œì§€ ì¶œë ¥
    }
}

```

**Processor**
- `Subscriber` + `Publisher`ë¥¼ ë™ì‹œì— êµ¬í˜„í•˜ëŠ” ì¤‘ê°„ ì²˜ë¦¬ì.

### ë¦¬ì•¡í‹°ë¸Œ ìŠ¤íŠ¸ë¦¼ì¦ˆ ê´€ë ¨ ìš©ì–´ ì •ì˜
> ë¦¬ì•¡í‹°ë¸Œ ìŠ¤íŠ¸ë¦¼ì¦ˆëŠ” Signalë¡œ ì†Œí†µí•˜ê³ , Demandë¡œ ìš”ì²­í•˜ê³ , Emitìœ¼ë¡œ ë°œí–‰í•˜ë©°, ë°ì´í„°ëŠ” Upstream â†’ Downstream ë°©í–¥ìœ¼ë¡œ Sequenceë¥¼ ë”°ë¼ Operatorë¡œ ì²˜ë¦¬(ê°€ê³µ)ë˜ê³ , Source(ë°ì´í„°)ì—ì„œ ì‹œì‘ëœë‹¤.

|ìš©ì–´ | ì˜ë¯¸|
|---|---|
|Signal | Publisherì™€ Subscriber ê°„ì— ì£¼ê³ ë°›ëŠ” ì‹ í˜¸ (ex. onNext, onError, onComplete í˜¸ì¶œ)|
|Demand | Subscriberê°€ Publisherì—ê²Œ ë°ì´í„°ë¥¼ "ìš”ì²­"í•˜ëŠ” ê²ƒ (request ë©”ì„œë“œ í˜¸ì¶œ)|
|Emit | Publisherê°€ ë°ì´í„°ë¥¼ "ë°œí–‰"í•´ì„œ Subscriberì—ê²Œ ë³´ë‚´ëŠ” ê²ƒ|
|Upstream/Downstream | ë°ì´í„° íë¦„ ë°©í–¥: Upstream(ìœ„ìª½, ë°ì´í„° ì œê³µì) â†’ Downstream(ì•„ë˜ìª½, ë°ì´í„° ì†Œë¹„ì)|
|Sequence | ë°ì´í„°ì˜ ì—°ì†ì ì¸ íë¦„(ì‹œí€€ìŠ¤), ì—°ì‚°ì ì²´ì¸ìœ¼ë¡œ ì´ì–´ì§€ëŠ” ë°ì´í„° íë¦„|
|Operator | ë°ì´í„°ë¥¼ ë³€í™˜í•˜ê±°ë‚˜ ê°€ê³µí•˜ëŠ” ë©”ì„œë“œë“¤ (ex. map, filter)|
|Source | ë°ì´í„°ì˜ ì‹œì‘ì (ì›ë³¸), ex. Data Source, Source Flux ë“±|


### ë¦¬ì•¡í‹°ë¸Œ ìŠ¤íŠ¸ë¦¼ì¦ˆ êµ¬í˜„ ê·œì¹™
> ìš”ì²­í•œ ë§Œí¼ë§Œ ì•ˆì „í•˜ê²Œ ë°ì´í„°ë¥¼ ë³´ë‚´ê³ , ì‹¤íŒ¨í•˜ê±°ë‚˜ ëë‚˜ë©´ ê¹¨ë—í•˜ê²Œ ì •ë¦¬í•œë‹¤.

#### Publisher êµ¬í˜„ ê·œì¹™
- ìš”ì²­í•œ ë°ì´í„° ìˆ˜ ì´í•˜ë¡œë§Œ `onNext` í˜¸ì¶œí•´ì•¼ í•œë‹¤.
- ë°ì´í„° ë°œí–‰ ì¤‘ ì‹¤íŒ¨í•˜ë©´ `onError`, ì„±ê³µí•˜ë©´ `onComplete` í˜¸ì¶œí•´ì•¼ í•œë‹¤.
- ì™„ë£Œ(`onComplete`) ë˜ëŠ” ì—ëŸ¬(`onError`) í›„ì—ëŠ” ë” ì´ìƒ Signalì„ ë³´ë‚´ë©´ ì•ˆ ëœë‹¤.
- êµ¬ë…ì´ ì·¨ì†Œë˜ë©´ ë°ì´í„° ë°œí–‰ì„ ë©ˆì¶°ì•¼ í•œë‹¤.

#### Subscriber êµ¬í˜„ ê·œì¹™
- ë°ì´í„°ë¥¼ ë°›ê³  ì‹¶ìœ¼ë©´ ë°˜ë“œì‹œ `request(n)`ë¥¼ í˜¸ì¶œí•´ì•¼ í•œë‹¤.
- `onComplete`ë‚˜ `onError` ë°›ì€ í›„ì—ëŠ” ë‹¤ë¥¸ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì•ˆ ëœë‹¤.
- êµ¬ë…ì´ ëë‚˜ë©´ Subscriptionì„ ëª…í™•íˆ ì·¨ì†Œí•˜ê±°ë‚˜ ì •ë¦¬í•´ì•¼ í•œë‹¤.
- í•˜ë‚˜ì˜ SubscriberëŠ” í•˜ë‚˜ì˜ Subscriptionë§Œ ìœ ì§€í•´ì•¼ í•œë‹¤.

#### Subscription êµ¬í˜„ ê·œì¹™
- `request(n)` í˜¸ì¶œì€ ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•´ë„ ëœë‹¤.
- êµ¬ë…ì´ ì·¨ì†Œë˜ë©´ `request(n)`ì´ ë” ì´ìƒ ë™ì‘í•˜ë©´ ì•ˆ ëœë‹¤.
- ì˜ëª»ëœ ìš”ì²­(`n <= 0`)ì€ ì—ëŸ¬(`onError`)ë¥¼ ë³´ë‚´ì•¼ í•œë‹¤.
- ë¬´í•œ ìš”ì²­(`Long.MAX_VALUE`)ë„ ì§€ì›í•´ì•¼ í•œë‹¤ (Unbounded Stream).

#### Processor
- Publisher + Subscriber ê·œì¹™ì„ ë™ì‹œì— ì§€ì¼œì•¼ í•œë‹¤.


## RxJava, Reactor, WebFluxì˜ ê´€ê³„
> RxJavaì™€ ReactorëŠ” ëª¨ë‘ Reactive Streams í‘œì¤€ì„ êµ¬í˜„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, ëª©ì ì€ ë¹„ìŠ·í•˜ì§€ë§Œ ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” ìƒíƒœê³„ì™€ í™˜ê²½ì´ ë‹¤ë¥´ë‹¤. Spring WebFluxëŠ” Reactorë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë©°, RxJavaì™€ëŠ” ì§ì ‘ì ì¸ ê´€ê³„ê°€ ì—†ë‹¤. ê·¸ëŸ¬ë‚˜ RxJavaë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.

### Reactor
> ReactorëŠ” ìŠ¤í”„ë§ íŒ€ì´ ë§Œë“  Reactive Streams êµ¬í˜„ì²´ë¡œ, WebFluxì˜ í•µì‹¬ ì—”ì§„ ì—­í• ì„ í•œë‹¤.
> Reactive Streams í‘œì¤€ì„ ì¤€ìˆ˜í•˜ë©°, ë¹„ë™ê¸° ë°ì´í„° ì²˜ë¦¬ì™€ ë…¼ë¸”ë¡œí‚¹ ìŠ¤íŠ¸ë¦¼ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•œë‹¤.
> 
> Reactorì˜ ì£¼ìš” í´ë˜ìŠ¤:
> - Mono: 0~1ê°œì˜ ë°ì´í„°ë¥¼ ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬.
> - Flux: 0~Nê°œì˜ ë°ì´í„°ë¥¼ ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬.
> 
> ReactorëŠ” WebFluxë¿ ì•„ë‹ˆë¼, ë‹¤ë¥¸ ìŠ¤í”„ë§ ëª¨ë“ˆ(ì˜ˆ: Spring Data Reactive, Spring Security Reactive)ì—ì„œë„ ì‚¬ìš©ëœë‹¤.

### Spring WebFlux
> Spring WebFluxëŠ” ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” ë…¼ë¸”ë¡œí‚¹(Non-Blocking) ë¹„ë™ê¸° ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì„ ìœ„í•œ í”„ë ˆì„ì›Œí¬ì´ë‹¤.
> - Spring MVCì™€ ìœ ì‚¬í•œ ì—­í• ì„ í•˜ì§€ë§Œ, Reactive Programmingì„ ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆë‹¤.
> - Servlet API ëŒ€ì‹  Netty, Undertow ê°™ì€ ë…¼ë¸”ë¡œí‚¹ ì„œë²„ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
> - ë‚´ë¶€ì ìœ¼ë¡œ Reactorë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë©°, ë°ì´í„°ë¥¼ ìŠ¤íŠ¸ë¦¼ í˜•íƒœë¡œ ì²˜ë¦¬í•œë‹¤.

### RxJava
> RxJavaëŠ” Netflixê°€ ë§Œë“  Reactive Programming ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, Reactorì™€ ë§ˆì°¬ê°€ì§€ë¡œ Reactive Streams í‘œì¤€ì„ ì§€ì›í•œë‹¤.
> - Reactorì™€ ëª©ì ì€ ë™ì¼í•˜ì§€ë§Œ, ë‹¤ìŒê³¼ ê°™ì€ ì°¨ì´ì ì´ ìˆë‹¤:
>   - ë²”ìš©ì„±: RxJavaëŠ” ìŠ¤í”„ë§ ìƒíƒœê³„ì™€ ë…ë¦½ì ìœ¼ë¡œ ì‚¬ìš©ë˜ë©°, ë‹¤ì–‘í•œ Java ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.
>   - ìŠ¤í”„ë§ê³¼ì˜ í†µí•©: ReactorëŠ” ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì™€ ê¸´ë°€í•˜ê²Œ í†µí•©ë˜ì–´ ìˆìœ¼ë©°, RxJavaë³´ë‹¤ ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ì—ì„œ ë” ë§ì´ ì‚¬ìš©ëœë‹¤.



## Blocking I/O
> Blocking I/OëŠ” I/O ì‘ì—… ì™„ë£Œê¹Œì§€ ìŠ¤ë ˆë“œë¥¼ ëŒ€ê¸°ì‹œí‚¤ê¸° ë•Œë¬¸ì— CPU ë‚­ë¹„, ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ ë¹„ìš©, ë©”ëª¨ë¦¬ ì˜¤ë²„í—¤ë“œ, ìŠ¤ë ˆë“œ í’€ ì§€ì—° ë“± ë‹¤ì–‘í•œ ì„±ëŠ¥ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.

### 1. Blocking I/Oë€?
- ì™¸ë¶€ ì¥ì¹˜(ë””ìŠ¤í¬, ë„¤íŠ¸ì›Œí¬ ë“±)ë¡œë¶€í„° ë°ì´í„°ë¥¼ ì½ê±°ë‚˜ ì“¸ ë•Œ **I/O ì‘ì—…ì´ ëë‚  ë•Œê¹Œì§€ ìŠ¤ë ˆë“œê°€ ëŒ€ê¸°**í•˜ëŠ” ë°©ì‹ì´ë‹¤.
- ì˜ˆì‹œ: íŒŒì¼ ì½ê¸°, DB ì¡°íšŒ, ë„¤íŠ¸ì›Œí¬ í†µì‹ .

### 2. Blocking I/O ë¬¸ì œì 
- **CPU ë‚­ë¹„**: ìŠ¤ë ˆë“œê°€ ëŒ€ê¸°í•˜ëŠ” ë™ì•ˆ CPUëŠ” ë‹¤ë¥¸ ì¼ì„ ëª» í•œë‹¤.
- **Context Switching ë¹„ìš©**: ë§ì€ ìŠ¤ë ˆë“œê°€ ëŒ€ê¸°í•˜ë©´ ì „í™˜ ë¹„ìš©ì´ ì»¤ì ¸ ì„±ëŠ¥ì´ ì €í•˜ëœë‹¤.
- **ê³¼ë„í•œ ë©”ëª¨ë¦¬ ì‚¬ìš©**: ìŠ¤ë ˆë“œë§ˆë‹¤ Stack ë©”ëª¨ë¦¬ê°€ í•„ìš”í•´ì„œ ë©”ëª¨ë¦¬ ì†Œëª¨ê°€ ì»¤ì§„ë‹¤.
- **ìŠ¤ë ˆë“œ í’€ í•œê³„**: ìŠ¤ë ˆë“œ í’€ì´ ìˆì–´ë„ ìš”ì²­ì´ ëª°ë¦¬ë©´ í’€ì— ìŠ¤ë ˆë“œê°€ ë¶€ì¡±í•´ì ¸ ì¶”ê°€ ì§€ì—°ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

### 3. Context Switchingì´ë€?
- CPUê°€ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ë©ˆì¶”ê³  ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ **PCB(Process Control Block)** ì €ì¥/ë³µì›í•˜ëŠ” ê³¼ì •.
- ì „í™˜(ìŠ¤ìœ„ì¹­)ë§ˆë‹¤ ì‹œê°„ì´ ë“¤ê³ , ì´ê²Œ ë§ì•„ì§€ë©´ **CPU ì „ì²´ ì„±ëŠ¥ì´ í•˜ë½**í•œë‹¤.

### 4. ë©”ëª¨ë¦¬/ì‘ë‹µ ë¬¸ì œ
- ìŠ¤ë ˆë“œ í•˜ë‚˜ë‹¹ ê¸°ë³¸ ìŠ¤íƒ ë©”ëª¨ë¦¬ í•„ìš”(ì˜ˆ: 64ë¹„íŠ¸ JVM ê¸°ë³¸ 1MB).
- ìˆ˜ì²œ~ìˆ˜ë§Œ ê°œ ìŠ¤ë ˆë“œê°€ ìƒì„±ë˜ë©´ **ë©”ëª¨ë¦¬ ì˜¤ë²„í—¤ë“œ**ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
- ìŠ¤ë ˆë“œ í’€ì´ ìˆì–´ë„, í’€ì— ë‚¨ì€ ìŠ¤ë ˆë“œê°€ ì—†ìœ¼ë©´ **ì¶”ê°€ ìš”ì²­ì´ ëŒ€ê¸°**í•˜ê²Œ ë˜ì–´ ì‘ë‹µ ì§€ì—°ì´ ìƒê¸´ë‹¤.

---

## Non-Blocking I/O í•µì‹¬ ìš”ì•½
> Non-Blocking I/OëŠ” ìŠ¤ë ˆë“œê°€ ì‘ì—… ì™„ë£Œë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ì¦‰ì‹œ ë‹¤ìŒ ìš”ì²­ì„ ì²˜ë¦¬í•´ CPUì™€ ë©”ëª¨ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ë§Œ, CPU ì‘ì—…ëŸ‰ì´ ë§ê±°ë‚˜ Blocking ìš”ì†Œê°€ ì„ì´ë©´ ì´ì ì„ ì‚´ë¦¬ê¸° ì–´ë µë‹¤.

### 1. Non-Blocking I/Oë€?
- Blocking I/Oì™€ ë‹¬ë¦¬, **ì‘ì—… ì™„ë£Œë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³ ** ìŠ¤ë ˆë“œê°€ **ë°”ë¡œ ë‹¤ìŒ ì‘ì—…**ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
- ìš”ì²­í•œ ìŠ¤ë ˆë“œëŠ” **ì°¨ë‹¨(blocking)ë˜ì§€ ì•Šê³  ì¦‰ì‹œ ë°˜í™˜**ëœë‹¤.

### 2. Non-Blocking I/O íŠ¹ì§•
- **ì‘ì—… ìŠ¤ë ˆë“œ ì¢…ë£Œ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´** ë‹¤ìŒ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
- **CPU ëŒ€ê¸° ì‹œê°„**ê³¼ **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**ì´ ì¤„ì–´ë“ ë‹¤.
- **ì ì€ ìˆ˜ì˜ ìŠ¤ë ˆë“œ**ë¡œ **ë§ì€ ìš”ì²­**ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
- Blocking I/Oì— ë¹„í•´ **ë©€í‹°ìŠ¤ë ˆë”© ì˜¤ë²„í—¤ë“œ**(context switching, ë©”ëª¨ë¦¬ ë‚­ë¹„)ê°€ ê±°ì˜ ì—†ë‹¤.

### 3. Non-Blocking I/O í•œê³„
- **CPU ì‚¬ìš©ëŸ‰ì´ ë§ì€ ì‘ì—…**ì´ í¬í•¨ë˜ë©´ ì˜¤íˆë ¤ ì„±ëŠ¥ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆë‹¤.
- ìš”ì²­ ì²˜ë¦¬ íë¦„ì— **Blocking I/Oê°€ ë¼ì–´ ìˆìœ¼ë©´** Non-Blockingì˜ ì´ì ì„ ì‚´ë¦¬ê¸° ì–´ë µë‹¤.

### 4. ì™„ì „í•œ Non-Blocking I/O (Fully Non-Blocking)
- ë„¤íŠ¸ì›Œí¬ í†µì‹ ë¿ ì•„ë‹ˆë¼ **DB ì¡°íšŒ** ë“±ë„ ëª¨ë‘ Non-Blockingì´ì–´ì•¼ ì§„ì •í•œ Non-Blocking íš¨ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.
- í•˜ë‚˜ë¼ë„ Blocking ì‘ì—…ì´ ë¼ë©´ **ìŠ¤ë ˆë“œ ì°¨ë‹¨(ë³‘ëª©)**ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

---

## ğŸ“š Spring Frameworkì—ì„œì˜ Blocking I/O vs Non-Blocking I/O
> Spring MVCëŠ” ìš”ì²­ë§ˆë‹¤ ìŠ¤ë ˆë“œê°€ ëŒ€ê¸°í•´ì„œ ëŠë ¤ì§€ê³ , Spring WebFluxëŠ” ìŠ¤ë ˆë“œ ì°¨ë‹¨ ì—†ì´ ë™ì‹œì— ë§ì€ ìš”ì²­ì„ ë¹ ë¥´ê²Œ ì²˜ë¦¬í•œë‹¤.

### Spring MVC (Blocking I/O)

- **ìš”ì²­ë‹¹ ìŠ¤ë ˆë“œê°€ ëŒ€ê¸°**í•œë‹¤. (ìš”ì²­ ì²˜ë¦¬ ì™„ë£Œë  ë•Œê¹Œì§€ ë©ˆì¶¤)
- ë§ì€ ìš”ì²­ â†’ **CPU ë‚­ë¹„**, **ë©”ëª¨ë¦¬ ê³¼ë‹¤ ì‚¬ìš©**, **ì‘ë‹µ ì§€ì—°**.
- `RestTemplate` ì‚¬ìš© â†’ ìš”ì²­í•˜ê³  ê²°ê³¼ ë°›ì„ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼.

### Spring WebFlux (Non-Blocking I/O)

- **ìš”ì²­ í›„ ìŠ¤ë ˆë“œëŠ” ë°”ë¡œ ë°˜í™˜**ëœë‹¤. (ë‹¤ìŒ ìš”ì²­ ë°”ë¡œ ì²˜ë¦¬)
- ì ì€ ìŠ¤ë ˆë“œë¡œ ë§ì€ ìš”ì²­ì„ **íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬**.
- `WebClient` ì‚¬ìš© â†’ ë¹„ë™ê¸°ë¡œ ìš”ì²­í•˜ê³ , ì‘ë‹µë„ ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬(`Mono`, `Flux`).

---

### 2-1. Blocking I/O ì˜ˆì‹œ (Spring MVC)

**[ë³¸ì‚¬ ì„œë²„ Controller]**

```java
@RestController
public class HeadOfficeController {
    @GetMapping("/v1/books/{id}")
    public ResponseEntity<Book> getBook(@PathVariable Long id) {
        Book book = restTemplate.getForEntity("http://localhost:7070/v1/books/" + id, Book.class).getBody();
        return ResponseEntity.ok(book);
    }
}
```

**[ì§€ì  ì„œë²„ Controller]**

```java
@RestController
public class BranchOfficeController {
    @GetMapping("/v1/books/{id}")
    public ResponseEntity<Book> getBook(@PathVariable Long id) throws InterruptedException {
        Thread.sleep(5000); // 5ì´ˆ ëŒ€ê¸°
        return ResponseEntity.ok(bookMap.get(id));
    }
}
```

**[í´ë¼ì´ì–¸íŠ¸]**

```java
for (int i = 1; i <= 5; i++) {
    Book book = restTemplate.getForEntity("http://localhost:8080/v1/books/" + i, Book.class).getBody();
    log.info("Book name: {}", book.getName());
}
```

- ìš”ì²­ í•˜ë‚˜ ì™„ë£Œë  ë•Œê¹Œì§€ ë‹¤ìŒ ìš”ì²­ **ëª» ë³´ëƒ„** â†’ ì´ 25ì´ˆ ê±¸ë¦¼

---

### 2-2. Non-Blocking I/O ì˜ˆì‹œ (Spring WebFlux)

**[ë³¸ì‚¬ ì„œë²„ Controller]**

```java
@RestController
public class ReactiveHeadOfficeController {
    @GetMapping("/v1/books/{id}")
    public Mono<Book> getBook(@PathVariable Long id) {
        return WebClient.create()
            .get()
            .uri("http://localhost:5050/v1/books/" + id)
            .retrieve()
            .bodyToMono(Book.class);
    }
}
```

**[ì§€ì  ì„œë²„ Controller]**

```java
@RestController
public class ReactiveBranchOfficeController {
    @GetMapping("/v1/books/{id}")
    public Mono<Book> getBook(@PathVariable Long id) throws InterruptedException {
        Thread.sleep(5000); // 5ì´ˆ ëŒ€ê¸° (Blocking ë‚¨ì•„ìˆìŒ)
        return Mono.just(bookMap.get(id));
    }
}
```

**[í´ë¼ì´ì–¸íŠ¸]**

```java
for (int i = 1; i <= 5; i++) {
    WebClient.create()
        .get()
        .uri("http://localhost:6060/v1/books/" + i)
        .retrieve()
        .bodyToMono(Book.class)
        .subscribe(book -> log.info("Book name: {}", book.getName()));
}
```

- ìš”ì²­ì„ **ë™ì‹œì— ë³´ëƒ„** â†’ ì „ì²´ 5ì´ˆ ë§Œì— ëë‚¨


## Non-Blocking I/O ë°©ì‹ì´ ì í•©í•œ ì‹œìŠ¤í…œ

### 1. Spring WebFluxë¥¼ ë¬´ì¡°ê±´ ì¨ì•¼ í• ê¹Œ?
- ë¬´ì¡°ê±´ Spring MVC â†’ WebFluxë¡œ ë°”ê¿€ í•„ìš”ëŠ” ì—†ìŒ.
- **ì í•©í•œ ìƒí™©**ì—ë§Œ WebFluxë¥¼ ì“°ëŠ” ê²Œ í˜„ì‹¤ì .
- ê³ ë ¤í•  ê²ƒ:
    - **í•™ìŠµ ë‚œì´ë„**ê°€ WebFluxê°€ í›¨ì”¬ ë†’ìŒ.
    - **ë¦¬ì•¡í‹°ë¸Œ í”„ë¡œê·¸ë˜ë° ê²½í—˜** ìˆëŠ” ì¸ë ¥ í•„ìš”.
    - ë¬´í„±ëŒ€ê³  ë„ì…í•˜ë©´ ì˜¤íˆë ¤ ë³µì¡ì„±, ìœ ì§€ë³´ìˆ˜ ë¹„ìš© ì¦ê°€.

### 2. WebFluxë¥¼ ê³ ë ¤í•´ì•¼ í•  ìƒí™©

#### 2.1 ëŒ€ëŸ‰ì˜ ìš”ì²­ íŠ¸ë˜í”½ì´ ë°œìƒí•˜ëŠ” ì‹œìŠ¤í…œ
- Blocking I/O ê¸°ë°˜ MVCë¡œ ê°ë‹¹ì´ ì•ˆ ë  ì •ë„ë¡œ **ìš”ì²­ íŠ¸ë˜í”½ì´ ë§ë‹¤ë©´** WebFlux ê³ ë ¤.
- ì„œë²„ í™•ì¥ ì—†ì´ **ì ì€ ì»´í“¨íŒ… ìì›**ìœ¼ë¡œ ë§ì€ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŒ.

#### 2.2 ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ ê¸°ë°˜ ì‹œìŠ¤í…œ
- ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê°„ì—ëŠ” **ì„œë¡œ ëŠì„ì—†ì´ I/O í†µì‹ **ì´ ë°œìƒ.
- ì´ë•Œ Blocking I/Oë¡œ ì¸í•´ í†µì‹  ì§€ì—°ì´ ìƒê¸°ë©´ ì „ì²´ ì‹œìŠ¤í…œì— ì•…ì˜í–¥.
- **Non-Blocking I/O ê¸°ìˆ ì´ í•„ìˆ˜**ì— ê°€ê¹Œì›€.

#### 2.3 ìŠ¤íŠ¸ë¦¬ë° ë˜ëŠ” ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ
- ë°ì´í„° ìŠ¤íŠ¸ë¦¼(ì˜ˆ: ì‹¤ì‹œê°„ ì±„íŒ…, ì£¼ì‹ ë°ì´í„°, IoT ë°ì´í„°) ì²˜ë¦¬ì— ìœ ë¦¬.
- WebFluxëŠ” **ë¬´í•œ ë°ì´í„° ìŠ¤íŠ¸ë¦¼**ì„ íš¨ìœ¨ì ìœ¼ë¡œ ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

### 3. WebFluxë¥¼ ë„ì…í•  ë•Œ ì£¼ì˜ì‚¬í•­

- í•™ìŠµ ê³¡ì„ ì´ ë†’ë‹¤: Spring MVCë³´ë‹¤ **í•™ìŠµ ë‚œì´ë„**ê°€ í™•ì—°íˆ ë†’ìŒ.
- ê°œë°œì í™•ë³´ê°€ ì–´ë µë‹¤: **ë¦¬ì•¡í‹°ë¸Œ í”„ë¡œê·¸ë˜ë° ê²½í—˜ì**ê°€ ë§ì§€ ì•ŠìŒ.
- ë¬´í„±ëŒ€ê³  ë„ì…í•˜ë©´ ì˜¤íˆë ¤ **ë³µì¡ë„, ë¦¬íŒ©í„°ë§ ë¹„ìš©**ì´ ëŠ˜ì–´ë‚  ìˆ˜ ìˆìŒ.
- ê¸°ì¡´ MVCì²˜ëŸ¼ ì‰½ê²Œ ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì–´ë µë‹¤.

## ìµœì¢… ì •ë¦¬
> ìš”ì²­ëŸ‰ì´ ë§ê±°ë‚˜ ì‹¤ì‹œê°„ ë°ì´í„° ì²˜ë¦¬ê°€ í•„ìš”í•œ ê²½ìš° WebFluxë¥¼ ê³ ë ¤í•˜ê³ , ë‹¨ìˆœí•˜ê³  ì•ˆì •ì ì¸ ê°œë°œì—ëŠ” ì—¬ì „íˆ Spring MVCê°€ ì í•©í•˜ë‹¤.

| ìƒí™© | WebFlux ì í•© ì—¬ë¶€ |
|:---|:---|
| ì†Œê·œëª¨, ìš”ì²­ëŸ‰ ì ìŒ | âŒ Spring MVCë¡œ ì¶©ë¶„ |
| ëŒ€ê·œëª¨ íŠ¸ë˜í”½, ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¼, ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ | âœ… WebFlux ê°•ë ¥ ì¶”ì²œ |
| ê°œë°œì ê²½í—˜ ë¶€ì¡± | âŒ WebFlux ë„ì… ì‹ ì¤‘íˆ ê²€í†  |



## 4.1 í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ (Functional Interface)
> **"í•˜ë‚˜ì˜ ì¶”ìƒ ë©”ì„œë“œë§Œ ê°€ì§„ ì¸í„°í˜ì´ìŠ¤ë¡œ, Java 8ë¶€í„° ëŒë‹¤ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í•µì‹¬ ê°œë…"**

- **í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°**ì˜ ê¸°ë³¸ ê°œë…ì„ Javaì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ **Java 8**ë¶€í„° **í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤**ê°€ ë„ì…ë˜ì—ˆë‹¤.
- **í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤**ë€, "**ë‹¨ í•˜ë‚˜ì˜ ì¶”ìƒ ë©”ì„œë“œë§Œ ê°€ì§€ëŠ” ì¸í„°í˜ì´ìŠ¤**"ë¥¼ ì˜ë¯¸í•œë‹¤.
- ê¸°ì¡´ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬ë¶„ë˜ëŠ” ì´ìœ ëŠ”, ì˜¤ì§ í•˜ë‚˜ì˜ ë©”ì„œë“œë§Œ ì •ì˜ë˜ì–´ ìˆì–´ì•¼ í•˜ë©°, ì´ ë•ë¶„ì— **ëŒë‹¤ í‘œí˜„ì‹**(Lambda Expression)ìœ¼ë¡œ ê°„ê²°í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- `@FunctionalInterface` ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì´ë©´ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì„ì„ ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸í•  ìˆ˜ ìˆë‹¤. (ë¶™ì´ì§€ ì•Šì•„ë„ ë˜ì§€ë§Œ, ë¶™ì´ë©´ ì»´íŒŒì¼ íƒ€ì„ì— ì²´í¬ ê°€ëŠ¥)
- ì˜ˆì‹œë¡œ ìì£¼ ë“±ì¥í•˜ëŠ” **Comparator** ì¸í„°í˜ì´ìŠ¤:
    - `int compare(T o1, T o2);` í•˜ë‚˜ì˜ ì¶”ìƒ ë©”ì„œë“œë¥¼ ê°€ì§„ë‹¤.
    - ì¶”ê°€ ë©”ì„œë“œë“¤ (`reversed()`, `thenComparing()`)ì€ **default ë©”ì„œë“œ**ë¼ì„œ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ ìš”ê±´ì„ í•´ì¹˜ì§€ ì•ŠëŠ”ë‹¤.
- **Java 8 ì´ì „**ì—ë„ ì¸í„°í˜ì´ìŠ¤ëŠ” ìˆì—ˆì§€ë§Œ, **ëŒë‹¤ì‹**ì„ ì‚¬ìš©í•˜ë ¤ë©´ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ê°€ í•„ìš”í•´ì„œ ë³„ë„ë¡œ êµ¬ë¶„í•œ ê²ƒì´ë‹¤.
- ëŒë‹¤ í‘œí˜„ì‹ì„ ì“°ë©´ ì½”ë“œê°€ í›¨ì”¬ ê°„ê²°í•´ì§€ê³ , ì…ë ¥ëœ ê°ì²´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì„ ë” ëª…í™•í•˜ê³  ì§ê´€ì ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.

ì¢‹ì•„, ì´ë²ˆì—” **ë³´ë‚´ì¤€ ì˜ˆì‹œ ì½”ë“œ**ê¹Œì§€ ê¼­ í•„ìš”í•œ ë¶€ë¶„ë§Œ ìš”ì•½í•´ì„œ ì •ë¦¬í• ê²Œ:

---

### ì˜ˆì‹œ

#### 1. Java 8 ì´ì „ ë°©ì‹ (ìµëª… í´ë˜ìŠ¤ ì‚¬ìš©)
- `Comparator` ì¸í„°í˜ì´ìŠ¤ë¥¼ **ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤**ë¡œ êµ¬í˜„.
- **ë³µì¡í•˜ê³  ê¸¸ë‹¤**ëŠ” ë‹¨ì ì´ ìˆë‹¤.

```java
        Collections.sort(cryptoCurrencies, new Comparator<CryptoCurrency>() {
    @Override
    public int compare(CryptoCurrency c1, CryptoCurrency c2) {
        return c1.getUnit().name().compareTo(c2.getUnit().name());
    }
});
```

#### 2. Java 8 ì´í›„ (ëŒë‹¤ í‘œí˜„ì‹ ì‚¬ìš©)
- **ëŒë‹¤ í‘œí˜„ì‹**ì„ ì´ìš©í•´ **í•œ ì¤„**ë¡œ ì •ë¦¬.
- í›¨ì”¬ **ê°„ê²°í•˜ê³  ì½ê¸° ì‰¬ì›€**.

```java
Collections.sort(cryptoCurrencies,
    (c1, c2) -> c1.getUnit().name().compareTo(c2.getUnit().name())
);
```

#### í•µì‹¬ ìš”ì 
- `Comparator`ëŠ” **í•˜ë‚˜ì˜ ì¶”ìƒ ë©”ì„œë“œ(compare)**ë§Œ ìˆì–´ì„œ ëŒë‹¤ë¡œ ë°”ë¡œ í‘œí˜„ ê°€ëŠ¥.
- Java 8ë¶€í„°ëŠ” **ëŒë‹¤ì‹** ë•ë¶„ì— **ì½”ë“œê°€ ì§§ì•„ì§€ê³ ** **ê°€ë…ì„±**ì´ ì¢‹ì•„ì¡Œë‹¤.
- ì´ê±¸ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ê¸°ë°˜ì´ ë°”ë¡œ **í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤**.


## 4.2 ëŒë‹¤ í‘œí˜„ì‹ (Lambda Expression) ìš”ì•½

- **ëŒë‹¤ í‘œí˜„ì‹**ì€ "í•¨ìˆ˜ë¥¼ ê°’ì²˜ëŸ¼ ì „ë‹¬í•˜ëŠ” ê°„ê²°í•œ ë¬¸ë²•"ì´ë‹¤.
- **Javascript, Scala** ë“±ì€ í•¨ìˆ˜ ìì²´ë¥¼ ê°’ìœ¼ë¡œ ë„˜ê¸¸ ìˆ˜ ìˆê³ , JavaëŠ” **Java 8**ë¶€í„° ëŒë‹¤ í‘œí˜„ì‹ìœ¼ë¡œ ì´ë¥¼ ì§€ì›í•˜ê²Œ ëë‹¤.
- ê¸°ì¡´ì—ëŠ” **ìµëª… í´ë˜ìŠ¤**ë¥¼ ë§Œë“¤ì–´ì•¼ í–ˆë˜ ê²ƒì„ ëŒë‹¤ë¡œ ê°„ë‹¨íˆ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.

### ì˜ˆì‹œ

#### 1. Comparatorë¥¼ ëŒë‹¤ë¡œ ì •ë¦¬
```java
Collections.sort(cryptoCurrencies,
    (c1, c2) -> c1.getUnit().name().compareTo(c2.getUnit().name())
);
```
- Comparator êµ¬í˜„ì„ **ëŒë‹¤**ë¡œ í•œ ì¤„ ì²˜ë¦¬.

#### 2. Stream APIì™€ ëŒë‹¤ í™œìš©
```java
cryptoCurrencies.stream()
    .filter(cc -> cc.getUnit() == CurrencyUnit.BTC)
    .map(cc -> cc.getName() + "(ë¹„íŠ¸ì½”ì¸)")
    .forEach(System.out::println);
```
- `filter`, `map`, `forEach` ëª¨ë‘ **ëŒë‹¤**ë¡œ êµ¬í˜„.
- **ìŠ¤íŠ¸ë¦¼ + ëŒë‹¤** ì¡°í•©ìœ¼ë¡œ ê°„ê²°í•œ ë°ì´í„° ì²˜ë¦¬ ê°€ëŠ¥.

#### ì¶”ê°€ í•µì‹¬ ì´ë¡ 

- **ëŒë‹¤ ìº¡ì²˜ë§**: ëŒë‹¤ ì•ˆì—ì„œëŠ” ì™¸ë¶€ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ë°, ì´ë•Œ ê·¸ ë³€ìˆ˜ëŠ” **ì‚¬ì‹¤ìƒ final**ì´ì–´ì•¼ í•œë‹¤. (ê°’ ë³€ê²½ ë¶ˆê°€)
- **JVM ì–¸ì–´**(Scala ë“±)ì—ì„œë„ í•¨ìˆ˜ ìì²´ë¥¼ ê°’ìœ¼ë¡œ ë‹¤ë£¨ê¸° ì‰½ê²Œ í•˜ê¸° ìœ„í•´ ëŒë‹¤ë¥¼ ì‚¬ìš©í•œë‹¤.

#### ìµœì¢… ìš”ì•½ ë¬¸ì¥
> "ëŒë‹¤ í‘œí˜„ì‹ì€ í•˜ë‚˜ì˜ ì¶”ìƒ ë©”ì„œë“œë¥¼ ê°€ì§„ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•  ë•Œ, í•¨ìˆ˜ì²˜ëŸ¼ ì½”ë“œë¥¼ ê°„ê²°í•˜ê²Œ ì‘ì„±í•˜ê³ , ì™¸ë¶€ ë³€ìˆ˜ë¥¼ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•œë‹¤."


ì¢‹ì•„, ì´ë²ˆì—” ë³´ë‚´ì¤€ **ë©”ì„œë“œ ë ˆí¼ëŸ°ìŠ¤ (Method Reference)** ë¶€ë¶„ë„ ì˜ˆì‹œ í¬í•¨í•´ì„œ ì§§ê³  í•µì‹¬ë§Œ ì •ë¦¬í•´ì¤„ê²Œ:

---

## 4.3 ë©”ì„œë“œ ë ˆí¼ëŸ°ìŠ¤ (Method Reference) ìš”ì•½
> "ë©”ì„œë“œ ë ˆí¼ëŸ°ìŠ¤ëŠ” ëŒë‹¤ì‹ì„ ë” ê°„ë‹¨íˆ `::` ê¸°í˜¸ë¡œ í‘œí˜„í•˜ëŠ” ë°©ë²•ì´ë©°, static, ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ, ê°ì²´ ë©”ì„œë“œ, ìƒì„±ì ëª¨ë‘ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤."

- **ë©”ì„œë“œ ë ˆí¼ëŸ°ìŠ¤**ë€, **ëŒë‹¤ í‘œí˜„ì‹ì„ ë” ê°„ë‹¨í•˜ê²Œ** ì‘ì„±í•˜ëŠ” ë°©ë²•.
- ê¸°ì¡´ `(Car car) -> car.getCarName()`ì„ `Car::getCarName` ì²˜ëŸ¼ í‘œí˜„.
- ë©”ì„œë“œ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì“°ë ¤ë©´ `::` ê¸°í˜¸ë¥¼ ì‚¬ìš©í•œë‹¤.


### ë©”ì„œë“œ ë ˆí¼ëŸ°ìŠ¤ 4ê°€ì§€ ìœ í˜•

| ìœ í˜• | ì„¤ëª… | ì˜ˆì‹œ |
|:---|:---|:---|
| 1. `ClassName::staticMethod` | í´ë˜ìŠ¤ì˜ static ë©”ì„œë“œ ì°¸ì¡° | `StringUtils::upperCase` |
| 2. `ClassName::instanceMethod` | í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ ì°¸ì¡° | `String::toUpperCase` |
| 3. `object::instanceMethod` | ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ ì°¸ì¡° | `calculator::getTotalPayment` |
| 4. `ClassName::new` | ìƒì„±ì ì°¸ì¡° (new) | `PaymentCalculator::new` |

### ì˜ˆì‹œ ìš”ì•½

- **static ë©”ì„œë“œ ì°¸ì¡°**
```java
map(StringUtils::upperCase);
```

- **instance ë©”ì„œë“œ ì°¸ì¡° (í´ë˜ìŠ¤ëª… ê¸°ì¤€)**
```java
map(String::toUpperCase);
```

- **instance ë©”ì„œë“œ ì°¸ì¡° (ê°ì²´ ê¸°ì¤€)**
```java
map(calculator::getTotalPayment);
```

- **new ìƒì„±ì ì°¸ì¡°**
```java
map(PaymentCalculator::new);
```

## 4.4 í•¨ìˆ˜ ë””ìŠ¤í¬ë¦½í„° ìš”ì•½

- **í•¨ìˆ˜ ë””ìŠ¤í¬ë¦½í„°**ëŠ” "í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì˜ ì…ë ¥ê³¼ ì¶œë ¥ íƒ€ì…"ì„ ì •ë¦¬í•œ ê²ƒ.
- **ëŒë‹¤ í‘œí˜„ì‹**ì„ ì‚¬ìš©í•  ë•Œ, í•´ë‹¹ ì¸í„°í˜ì´ìŠ¤ê°€ ì–´ë–¤ íŒŒë¼ë¯¸í„°ì™€ ë°˜í™˜ê°’ì„ ê°–ëŠ”ì§€ ì•Œì•„ì•¼ í•œë‹¤.
- ì£¼ë¡œ Java 8ì—ì„œ ë„ì…ëœ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì™€ ë§¤ì¹­ëœë‹¤.


### ì£¼ìš” í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ ì •ë¦¬

| í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ | í•¨ìˆ˜ ë””ìŠ¤í¬ë¦½í„° | ì„¤ëª… |
|:---|:---|:---|
| Predicate\<T\> | T â†’ boolean | ì¡°ê±´ íŒë‹¨ (ex. í•„í„°ë§) |
| Consumer\<T\> | T â†’ void | ë°ì´í„° ì†Œë¹„ (ex. ì €ì¥, ì¶œë ¥) |
| Function\<T, R\> | T â†’ R | ë°ì´í„° ë³€í™˜ (ex. ë§¤í•‘) |
| Supplier\<T\> | () â†’ T | ë°ì´í„° ì œê³µ (ex. ëœë¤ ê°’ ìƒì„±) |
| BiPredicate\<T, U\> | (T, U) â†’ boolean | ë‘ ì…ë ¥ ë¹„êµ |
| BiConsumer\<T, U\> | (T, U) â†’ void | ë‘ ì…ë ¥ ì†Œë¹„ |
| BiFunction\<T, U, R\> | (T, U) â†’ R | ë‘ ì…ë ¥ ë³€í™˜ |

- **Predicate**: ì¡°ê±´ì— ë§ëŠ” ë°ì´í„°ë§Œ í•„í„°ë§ (e.g., ê°€ê²© 500 ì´ìƒë§Œ)
- **Consumer**: íŠ¹ì • ë™ì‘ ìˆ˜í–‰ (e.g., ì €ì¥, ì¶œë ¥)
- **Function**: ì…ë ¥ì„ ê²°ê³¼ë¡œ ë³€í™˜ (e.g., ê°€ê²© ê³„ì‚°)
- **Supplier**: ì•„ë¬´ ì…ë ¥ ì—†ì´ ê°’ì„ ê³µê¸‰ (e.g., ëœë¤ ë‹¨ì–´ ì œê³µ)
