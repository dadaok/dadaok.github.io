---
layout:   post
title:    "ApplicationContextì™€ BeanFactory"
subtitle: "ApplicationContextì™€ BeanFactory í•™ìŠµ"
category: Spring
more_posts: posts.md
tags:     Spring
---
# [Spring IoC] ApplicationContextì™€ BeanFactory

<!--more-->
<!-- Table of contents -->
* this unordered seed list will be replaced by the toc
{:toc}

<!-- text -->

## IoC ì»¨í…Œì´ë„ˆë€?
> IoC(Inversion of Control, ì œì–´ì˜ ì—­ì „) ì»¨í…Œì´ë„ˆëŠ” ê°ì²´ì˜ ìƒì„±ê³¼ ìƒëª… ì£¼ê¸°ë¥¼ ê°œë°œìê°€ ì§ì ‘ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, Springì´ ëŒ€ì‹  ê´€ë¦¬í•˜ëŠ” ì»¨í…Œì´ë„ˆë‹¤.

ğŸ’¡ ì¦‰, ê°œë°œìê°€ `new` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ì„œ ê°ì²´ë¥¼ ì§ì ‘ ë§Œë“¤ì§€ ì•Šê³ , Springì´ ëŒ€ì‹  ë§Œë“¤ì–´ì„œ ì£¼ì…í•´ ì¤€ë‹¤.  
ğŸ’¡ Springì—ì„œëŠ” `BeanFactory`ì™€ `ApplicationContext`ê°€ IoC ì»¨í…Œì´ë„ˆ ì—­í• ì„ í•œë‹¤.  
  

**tip. ì´ë¡œ ì¸í•´ `new` ë¥¼ ì‚¬ìš© ì•ˆí•˜ê²Œ ë˜ê³  ì–´ë–¤ ì´ì ì´ ìˆëŠ”ê±¸ê¹Œ?**  
> `new` ì‚¬ìš©ì‹œ ì§ì ‘ êµ¬í˜„ì²´ë¥¼ ëª…ì‹œí•´ì•¼ëœë‹¤. ê·¸ë ‡ê²Œ ë˜ë©´ êµ¬í˜„ì²´ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ í•´ë‹¹ì„œë¹„ìŠ¤ì—ì„œ êµ¬í˜„ì²´ë¥¼ ë°”ê¿”ì¤˜ì•¼ëœë‹¤. ê²°í•©ë„ê°€ ë†’ì•„ì§„ë‹¤.
  
```java
// new ì‚¬ìš©ì‹œ
class SampleClass{
    private SampleInterface sampleInterface;

    public SampleClass(){
        // SampleService2ë¡œ ë°”ë€” ê²½ìš° ì½”ë“œì˜ ë³€ê²½ì´ í•„ìš” í•˜ë‹¤.
        this.sampleInterface = new SampleService1();
    }
}

// IoC ì‚¬ìš©ì‹œ
class SampleClass{
    private SampleInterface sampleInterface;

    public SampleClass(SampleInterface sampleInterface){
        this.sampleInterface = sampleInterface;
    }
}
```

## ApplicationContext, BeanFactory
> Springì—ì„œëŠ” IoC ì»¨í…Œì´ë„ˆë¥¼ êµ¬í˜„í•œ ì£¼ìš” ì¸í„°í˜ì´ìŠ¤ì¸ **BeanFactoryì™€ ApplicationContext**ê°€ ìˆë‹¤.

### BeanFactory (IoC ì»¨í…Œì´ë„ˆì˜ ê°€ì¥ ê¸°ë³¸ì ì¸ êµ¬í˜„ì²´)
- ê°€ì¥ ê¸°ë³¸ì ì¸ IoC ì»¨í…Œì´ë„ˆë¡œ, ë¹ˆì„ ë“±ë¡í•˜ê³  ì¡°íšŒí•˜ëŠ” ìµœì†Œí•œì˜ ê¸°ëŠ¥ë§Œ ì œê³µ.
- Lazy Loading (ì§€ì—° ë¡œë”©) ë°©ì‹ â†’ í•„ìš”í•  ë•Œ ë¹ˆì„ ìƒì„±.
- ìë™ DI(@Autowired) ì§€ì› X â†’ ì§ì ‘ getBean()ì„ í˜¸ì¶œí•´ì•¼ í•¨.
- ëŒ€ë¶€ë¶„ì˜ Spring Boot í”„ë¡œì íŠ¸ì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠìŒ.
- í•˜ì§€ë§Œ Spring ë‚´ë¶€ì—ì„œëŠ” ì—¬ì „íˆ í•µì‹¬ì ì¸ ì—­í• ì„ í•¨.

```java
BeanFactory factory = new ClassPathXmlApplicationContext("applicationContext.xml");
MyInterface myService = factory.getBean(MyInterface.class);
```

### ApplicationContext (BeanFactoryì˜ í™•ì¥íŒ)
- BeanFactoryë¥¼ í™•ì¥í•œ IoC ì»¨í…Œì´ë„ˆë¡œ, ë” ë§ì€ ê¸°ëŠ¥ì„ ì œê³µ.
- Eager Loading (ì¦‰ì‹œ ë¡œë”©) ë°©ì‹ â†’ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ ë¹ˆì„ ë¯¸ë¦¬ ìƒì„±.
- ìë™ DI(@Autowired) ì§€ì›.
- AOP, ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ, ë©”ì‹œì§€ ì†ŒìŠ¤ ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ í¬í•¨.
- Spring Bootì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ApplicationContextë¥¼ ì‚¬ìš©í•¨.
- ëŒ€ë¶€ë¶„ì˜ Spring ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ IoC ì»¨í…Œì´ë„ˆë¡œ ì‚¬ìš©ë¨.

```text
1. ApplicationContextëŠ” ì–¸ì œë¶€í„° ë“±ì¥í–ˆì„ê¹Œ?
   âœ… ì‚¬ì‹¤ ApplicationContextëŠ” Spring 1.0 (2004ë…„)ë¶€í„° ì¡´ì¬í–ˆì–´.
   âœ… í•˜ì§€ë§Œ, Spring 2.xê¹Œì§€ëŠ” BeanFactoryë¥¼ ë” ë§ì´ ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì— ìµìˆ™í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆì–´.
   âœ… Spring 2.xì—ì„œëŠ” "ê²½ëŸ‰ ì»¨í…Œì´ë„ˆ" ê°œë… ë•Œë¬¸ì— BeanFactoryë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ì•˜ìŒ.

2. ì™œ BeanFactory ëŒ€ì‹  ApplicationContextê°€ ë“±ì¥í–ˆì„ê¹Œ?
   Spring 2.xì—ì„œ ApplicationContextê°€ ì ì  ë” ë§ì´ ì‚¬ìš©ë˜ê¸° ì‹œì‘í–ˆì–´. ì´ìœ ëŠ”:

        1) AOP ì§€ì› â†’ ApplicationContextëŠ” AOPì™€ ê°™ì€ ê³ ê¸‰ ê¸°ëŠ¥ì„ ì§€ì›.
        2) ìë™ DI ì§€ì› â†’ @Autowired ê°™ì€ ê¸°ëŠ¥ì„ ì œê³µ.
        3) ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì§€ì› â†’ ApplicationContextëŠ” ì´ë²¤íŠ¸ ê¸°ë°˜ í”„ë¡œê·¸ë˜ë°ì„ ì§€ì›.
        4) êµ­ì œí™”(i18n) ì§€ì› â†’ ë‹¤êµ­ì–´ ë©”ì‹œì§€ ê´€ë¦¬ ê°€ëŠ¥.
        5) BeanFactoryë³´ë‹¤ ì‚¬ìš©ì„±ì´ ì¢‹ìŒ â†’ BeanFactoryëŠ” getBean()ì„ ì¼ì¼ì´ í˜¸ì¶œí•´ì•¼ í–ˆìŒ.

ğŸ’¡ ê²°êµ­ Spring 3.xë¶€í„° BeanFactoryë¥¼ ì§ì ‘ ì“°ëŠ” ê²½ìš°ê°€ ì¤„ì–´ë“¤ì—ˆê³ , ëŒ€ì‹  ApplicationContextê°€ IoC ì»¨í…Œì´ë„ˆì˜ í‘œì¤€ì´ ëë‹¤
```



```java
ApplicationContext context = new AnnotationConfigApplicationContext(AppConfig.class);
MyService myService = context.getBean(MyService.class);
```

| íŠ¹ì§• | BeanFactory | ApplicationContext |
|------------|------------------|--------------------|
| **IoC ì»¨í…Œì´ë„ˆ ì—­í• ** | âœ… ê¸°ë³¸ì ì¸ DI ì»¨í…Œì´ë„ˆ | âœ… ê³ ê¸‰ ê¸°ëŠ¥ í¬í•¨ |
| **ë¹ˆ ë“±ë¡/ì¡°íšŒ** | âœ… `getBean()` ê°€ëŠ¥ | âœ… `getBean()` ê°€ëŠ¥ |
| **Lazy Loading** | âœ… ê¸°ë³¸ì ìœ¼ë¡œ Lazy | âŒ ê¸°ë³¸ì ìœ¼ë¡œ Eager |
| **DI ìë™ ì£¼ì… (`@Autowired`)** | âŒ ì§ì ‘ ìˆ˜ë™ ì£¼ì… í•„ìš” | âœ… ìë™ ì£¼ì… ì§€ì› |
| **AOP ì§€ì›** | âŒ ì§ì ‘ êµ¬í˜„í•´ì•¼ í•¨ | âœ… ìë™ ì§€ì› |
| **ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ** | âŒ ì§€ì› ì•ˆ í•¨ | âœ… ì§€ì› |
| **ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì†ë„** | âœ… ë¹ ë¦„ (í•„ìš”í•  ë•Œ ë¹ˆ ìƒì„±) | âŒ ìƒëŒ€ì ìœ¼ë¡œ ëŠë¦¼ (ë¯¸ë¦¬ ë¡œë”©) |
| **Spring Boot ê¸°ë³¸ ì»¨í…Œì´ë„ˆ** | âŒ ê±°ì˜ ì•ˆ ì”€ | âœ… ê¸°ë³¸ IoC ì»¨í…Œì´ë„ˆ |


**tip. ApplicationContextëŠ” ê²°êµ­ `BeanFactory`ë¥¼ í™•ì¥í•œ ê°œë…ì´ë‹¤. `BeanFactory`ëŠ” ë¹ˆì„ ì‚¬ìš© ì¦‰ì‹œ ìƒì„±í•˜ëŠ” ë°˜ë©´, `ApplicationContext`ëŠ” ì˜ì¡´ì„± ì£¼ì… ê³¼ì •ì—ì„œ ë‚´ë¶€ì ìœ¼ë¡œ `BeanFactory`ì™€ ë¦¬í”Œë ‰ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë¹ˆì„ ê´€ë¦¬í•œë‹¤.**

###  ì‹±ê¸€í†¤ ë¹ˆì˜ ê³µìœ  ë¬¸ì œ
> ì‹±ê¸€í†¤ ë¹ˆì´ ì—¬ëŸ¬ ìš”ì²­(ì‚¬ìš©ì) ê°„ì— ê³µìœ ëœë‹¤ëŠ” ì ì´ ì¥ì ì´ì§€ë§Œ, **ë™ì‹œì„± ë¬¸ì œ**ë¥¼ ì¡°ì‹¬í•´ì•¼ í•œë‹¤. í•„ë“œ ë³€ìˆ˜ë¥¼ ìƒíƒœê°’ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ ìœ„í—˜í•˜ë‹¤.

```java
@Service
public class SingletonService {
    private String user; // ê³µìœ  í•„ë“œ

    public void processRequest(String user) {
        this.user = user; // ì‚¬ìš©ì ì •ë³´ ì €ì¥
        System.out.println("í˜„ì¬ ì‚¬ìš©ì: " + this.user);
    }
}
```

## **ğŸ“Œ ìŠ¤í”„ë§ì—ì„œ ë¹ˆì„ ë“±ë¡í•˜ëŠ” ì£¼ìš” ì–´ë…¸í…Œì´ì…˜**
> Springì—ì„œ ë¹ˆì„ ë“±ë¡í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ëŒ€í‘œì ì¸ ì–´ë…¸í…Œì´ì…˜ë“¤ì„ ì •ë¦¬í•´ë³´ì!  
> ì´ ì–´ë…¸í…Œì´ì…˜ë“¤ì€ **Spring IoC ì»¨í…Œì´ë„ˆ(ApplicationContext)ì— ìë™ìœ¼ë¡œ ë¹ˆì„ ë“±ë¡í•˜ëŠ” ì—­í• **ì„ í•œë‹¤.  



### **1. ì£¼ìš” ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ì–´ë…¸í…Œì´ì…˜**
ğŸ’¡ **Springì´ ìë™ìœ¼ë¡œ ê°ì§€(`@ComponentScan`)í•´ì„œ ë¹ˆì„ ë“±ë¡í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜**  
ğŸ’¡ **`@Component`ë¥¼ í™•ì¥í•œ ì–´ë…¸í…Œì´ì…˜ë“¤ì´ ë§ìŒ!**

| ì–´ë…¸í…Œì´ì…˜ | ì„¤ëª… |
|------------|-------------------------------------------|
| **`@Component`** | ê°€ì¥ ê¸°ë³¸ì ì¸ ë¹ˆ ë“±ë¡ ì–´ë…¸í…Œì´ì…˜ (í´ë˜ìŠ¤ ë‹¨ìœ„) |
| **`@Service`** | ì„œë¹„ìŠ¤ ë ˆì´ì–´ ë¹ˆ ë“±ë¡ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë‹´ë‹¹) |
| **`@Repository`** | ë°ì´í„° ì•¡ì„¸ìŠ¤ ë ˆì´ì–´ ë¹ˆ ë“±ë¡ (DAO, Repository ê³„ì¸µ) |
| **`@Controller`** | ì›¹ ì»¨íŠ¸ë¡¤ëŸ¬ ë¹ˆ ë“±ë¡ (Spring MVCì—ì„œ ì‚¬ìš©) |
| **`@RestController`** | `@Controller` + `@ResponseBody` (REST API ì»¨íŠ¸ë¡¤ëŸ¬) |



#### **ğŸ“Œ `@Component` (ê¸°ë³¸ì ì¸ ë¹ˆ ë“±ë¡)**
`@Component`ëŠ” **Springì—ì„œ ìë™ ê°ì§€í•˜ì—¬ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ì–´ë…¸í…Œì´ì…˜**ì´ë‹¤.  
ì„œë¹„ìŠ¤, DAO, ì»¨íŠ¸ë¡¤ëŸ¬ ë“±ì—ì„œ **íŠ¹ì •í•œ ì—­í• ì„ ë¶€ì—¬í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜(`@Service`, `@Repository` ë“±)**ì´ ìˆì§€ë§Œ,  
ê·¸ê²Œ ì•„ë‹ˆì–´ë„ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê³  ì‹¶ë‹¤ë©´ `@Component`ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

```java
@Component
public class MyComponent {
    public void doSomething() {
        System.out.println("Component Bean ì‹¤í–‰");
    }
}
```



#### **ğŸ“Œ `@Service` (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ)**
`@Service`ëŠ” **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤**ì— ì‚¬ìš©í•œë‹¤.  
ğŸ’¡ `@Component`ì™€ ê¸°ëŠ¥ì ìœ¼ë¡œ ë™ì¼í•˜ì§€ë§Œ, **ì˜ë¯¸ì ìœ¼ë¡œ "ì„œë¹„ìŠ¤ ë ˆì´ì–´"ì„ì„ ëª…í™•íˆ í‘œí˜„í•˜ëŠ” ìš©ë„**ì´ë‹¤.

```java
@Service
public class UserService {
    public String getUser() {
        return "User Found!";
    }
}
```


#### **ğŸ“Œ `@Repository` (ë°ì´í„° ì•¡ì„¸ìŠ¤ ê³„ì¸µ)**
`@Repository`ëŠ” **ë°ì´í„°ë² ì´ìŠ¤ ì•¡ì„¸ìŠ¤ë¥¼ ë‹´ë‹¹í•˜ëŠ” DAO í´ë˜ìŠ¤**ì— ì‚¬ìš©í•œë‹¤.  
ğŸ’¡ `@Component`ì™€ ê¸°ëŠ¥ì ìœ¼ë¡œ ë™ì¼í•˜ì§€ë§Œ, **Springì´ íŠ¹ì • ì˜ˆì™¸(ì˜ˆ: SQLException)ë¥¼ `DataAccessException`ìœ¼ë¡œ ë³€í™˜í•˜ë„ë¡ ì§€ì›**í•¨.

```java
@Repository
public class UserRepository {
    public String findUser() {
        return "User Data";
    }
}
```


### **2. ìˆ˜ë™ ë¹ˆ ë“±ë¡ ê´€ë ¨ ì–´ë…¸í…Œì´ì…˜**
ğŸ’¡ **`@Component` ê¸°ë°˜ì´ ì•„ë‹ˆë¼, ì§ì ‘ ë¹ˆì„ ìˆ˜ë™ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜**  
ğŸ’¡ `@Bean`ì€ Java ê¸°ë°˜ ì„¤ì •ì—ì„œ ì‚¬ìš©í•˜ê³ , `@Configuration`ì€ ì„¤ì • í´ë˜ìŠ¤ë¥¼ ì˜ë¯¸í•œë‹¤.

| ì–´ë…¸í…Œì´ì…˜ | ì„¤ëª… |
|------------|-------------------------------------------|
| **`@Bean`** | ìˆ˜ë™ìœ¼ë¡œ ë¹ˆì„ ë“±ë¡ (ë©”ì„œë“œ ë‹¨ìœ„) |
| **`@Configuration`** | ì„¤ì • í´ë˜ìŠ¤ë¥¼ ì •ì˜ (Java ê¸°ë°˜ ì„¤ì •) |
| **`@ComponentScan`** | `@Component` ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ìë™ ê²€ìƒ‰ |



#### **ğŸ“Œ `@Bean` (ë©”ì„œë“œ ë‹¨ìœ„ë¡œ ë¹ˆ ë“±ë¡)**
ğŸ’¡ `@Bean`ì€ **XML ì„¤ì • ì—†ì´ ìë°” ì½”ë“œë¡œ ë¹ˆì„ ë“±ë¡í•  ë•Œ ì‚¬ìš©**í•œë‹¤.  
ğŸ’¡ `@Component`ëŠ” í´ë˜ìŠ¤ì— ë¶™ì´ì§€ë§Œ, `@Bean`ì€ **ë©”ì„œë“œ ë‹¨ìœ„ë¡œ ë“±ë¡í•˜ëŠ” ë°©ì‹**ì´ë‹¤.  
âœ… @Beanì€ í´ë˜ìŠ¤ê°€ ì•„ë‹ˆë¼, ë©”ì„œë“œ ë‹¨ìœ„ì—ì„œ íŠ¹ì • ê°ì²´ë¥¼ Springì˜ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ë°©ì‹.  
âœ… @Componentì™€ ë‹¬ë¦¬ í´ë˜ìŠ¤ ìì²´ê°€ ì•„ë‹ˆë¼, í•´ë‹¹ ë©”ì„œë“œê°€ ë°˜í™˜í•˜ëŠ” ê°ì²´ë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ê²ƒì´ íŠ¹ì§•.  

```java
@Configuration
public class AppConfig {
    @Bean
    public UserService userService() {
        return new UserService();
    }
}
```

@Beanì´ ë¶™ì€ myService() ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ì–´ ë°˜í™˜í•˜ëŠ” ê°ì²´ê°€ ë¹ˆìœ¼ë¡œ ë“±ë¡ëœë‹¤.  
ì¦‰, í´ë˜ìŠ¤ ìì²´(AppConfig)ê°€ ë¹ˆì´ ì•„ë‹ˆë¼, @Beanì´ ë¶™ì€ ë©”ì„œë“œì˜ ë°˜í™˜ê°’ì´ ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ëŠ” ê²ƒ!  
âœ… `ApplicationContext`ì—ì„œ `getBean(UserService.class)`ë¡œ ì¡°íšŒ ê°€ëŠ¥.  


#### **ğŸ“Œ `@Configuration` (Java ê¸°ë°˜ ì„¤ì • í´ë˜ìŠ¤)**
ğŸ’¡ `@Configuration`ì€ **ì„¤ì • í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ ë•Œ ì‚¬ìš©**í•œë‹¤.  
ğŸ’¡ ë‚´ë¶€ì— `@Bean`ì„ í¬í•¨í•˜ê³ , **Springì´ ë¹ˆìœ¼ë¡œ ê´€ë¦¬**í•¨.  
ğŸ’¡ @Configurationì„ ì‚¬ìš©í•˜ë©´ ì‹±ê¸€í†¤ì´ ë³´ì¥ëœë‹¤. (Springì´ CGLIB í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ì—¬ @Bean ë©”ì„œë“œë¥¼ ì‹±ê¸€í†¤ìœ¼ë¡œ ë³´ì¥)

```java
@Configuration
public class AppConfig {
    @Bean
    public UserRepository userRepository() {
        return new UserRepository();
    }

    @Bean
    public UserService userService(UserRepository userRepository) {
        return new UserService(userRepository);
    }
}
```

âœ… **Spring Bootì—ì„œëŠ” ëŒ€ë¶€ë¶„ `@Configuration`ì„ ì‚¬ìš©í•˜ì—¬ ë¹ˆì„ ì„¤ì •í•œë‹¤.**


##### ğŸ“Œ ì´ì¯¤ì—ì„œ.. ì™œ? DataSource ê°™ì€ ê²ƒë“¤ì€ yml ì„¤ì •ë§Œ í•´ë„ ìë™ìœ¼ë¡œ ë¹ˆìœ¼ë¡œ ë“±ë¡ì´ ë˜ë©°, ë˜ @Configuration ì„ ì‚¬ìš©í•œ ì»¤ìŠ¤í„° ë§ˆì´ì§•ë„ ê°€ëŠ¥í•œ ê±¸ê¹Œ?  
yml ì„¤ì •ë§Œìœ¼ë¡œ ë¹ˆì´ ë“±ë¡ë˜ëŠ” ì´ìœ   
> Spring BootëŠ” ìë™ ì„¤ì •(Auto Configuration)ê³¼ @EnableAutoConfigurationì„ ì´ìš©í•˜ì—¬ DataSource, EntityManagerFactory ë“±ì˜ ë¹ˆì„ ìë™ìœ¼ë¡œ ë“±ë¡í•œë‹¤.  
> ì„¤ì •ì˜ í•µì‹¬ì€ spring-boot-starter-* ê°™ì€ ìŠ¤íƒ€í„°ê°€ í¬í•¨ë˜ì–´ ìˆë‹¤ëŠ” ì ì´ë‹¤.

```java
@Configuration
@ConditionalOnClass({DataSource.class, EmbeddedDatabaseType.class})
@EnableConfigurationProperties(DataSourceProperties.class)
@Import({DataSourceConfiguration.Hikari.class, DataSourceConfiguration.Tomcat.class})
public class DataSourceAutoConfiguration {
    
    @Bean
    @Primary
    @ConditionalOnMissingBean(DataSource.class)
    public DataSource dataSource(DataSourceProperties properties) {
        return properties.initializeDataSourceBuilder().build();
    }
}
```

> Spring BootëŠ” @EnableAutoConfigurationì„ ì‚¬ìš©í•˜ì—¬ ìë™ ì„¤ì • í´ë˜ìŠ¤ë¥¼ ì‹¤í–‰í•œë‹¤.(@SpringBootApplicationì—ëŠ” @EnableAutoConfigurationì´ í¬í•¨ë˜ì–´ ìˆë‹¤.)  
> ì´ ì„¤ì •ì´ @ConditionalOnMissingBean(DataSource.class) ì¡°ê±´ì„ ê°€ì§€ë¯€ë¡œ, ì‚¬ìš©ìê°€ ì§ì ‘ @Beanìœ¼ë¡œ ë“±ë¡í•˜ë©´ ìë™ ì„¤ì •ì„ ë¬´ì‹œí•œë‹¤.   
> Spring Boot ìŠ¤íƒ€í„°(spring-boot-starter-*)ëŠ” íŠ¹ì • ê¸°ëŠ¥ì„ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë¯¸ë¦¬ êµ¬ì„±ëœ ì˜ì¡´ì„± íŒ¨í‚¤ì§€ë‹¤.  

##### @EnableAutoConfigurationì´ ë™ì‘í•˜ëŠ” ì›ë¦¬
- @EnableAutoConfigurationì´ í™œì„±í™”ë˜ë©´ í´ë˜ìŠ¤íŒ¨ìŠ¤(Classpath)ë¥¼ ìŠ¤ìº”í•œë‹¤.
- spring.factories íŒŒì¼ì„ ì½ì–´ì„œ ìë™ ì„¤ì • í´ë˜ìŠ¤ ëª©ë¡ì„ í™•ì¸í•œë‹¤.
- ì¡°ê±´(@ConditionalOnClass, @ConditionalOnMissingBean)ì— ë”°ë¼ í•„ìš”í•œ ë¹ˆì„ ë“±ë¡í•œë‹¤.
- ìë™ ì„¤ì • íŒŒì¼(spring-boot-autoconfigure.jar) ë‚´ë¶€
  - META-INF/spring.factories íŒŒì¼ì„ ë³´ë©´ ìë™ ì„¤ì • í´ë˜ìŠ¤ ëª©ë¡ì´ í¬í•¨ë˜ì–´ ìˆë‹¤.

```properties
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\
org.springframework.boot.autoconfigure.web.servlet.ServletWebServerFactoryAutoConfiguration,\
...
```

DataSourceAutoConfiguration â†’ spring.datasource ì„¤ì •ì´ ìˆìœ¼ë©´ ìë™ìœ¼ë¡œ DataSource ë¹ˆì„ ë“±ë¡í•œë‹¤.  
âœ… HibernateJpaAutoConfiguration â†’ JPA ê´€ë ¨ ì„¤ì •ì´ ê°ì§€ë˜ë©´ EntityManagerFactoryë¥¼ ì„¤ì •í•œë‹¤.  

##### íŠ¹ì • ìë™ ì„¤ì • ì œì™¸
```java
@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})
public class MyApplication {
}
```

#### **ğŸ“Œ `@ComponentScan` (ìë™ ìŠ¤ìº” ë²”ìœ„ ì§€ì •)**
ğŸ’¡ `@ComponentScan`ì€ **íŠ¹ì • íŒ¨í‚¤ì§€ ë‚´ì—ì„œ `@Component`, `@Service`, `@Repository`, `@Controller` ë“±ì„ ìë™ìœ¼ë¡œ ì°¾ì•„ì„œ ë¹ˆìœ¼ë¡œ ë“±ë¡**í•¨.

```java
@Configuration
@ComponentScan(basePackages = "com.example.myapp")
public class AppConfig {
}
```
âœ… `com.example.myapp` íŒ¨í‚¤ì§€ ì•„ë˜ì˜ ëª¨ë“  `@Component`ë¥¼ ì°¾ì•„ì„œ ë¹ˆìœ¼ë¡œ ë“±ë¡í•¨.


### **3. íŠ¹ì • ê¸°ëŠ¥ì„ ìœ„í•œ ë¹ˆ ë“±ë¡ ì–´ë…¸í…Œì´ì…˜**
Springì—ëŠ” íŠ¹ì • ê¸°ëŠ¥ì„ ìœ„í•œ ë¹ˆ ë“±ë¡ ì–´ë…¸í…Œì´ì…˜ë„ ìˆë‹¤.

| ì–´ë…¸í…Œì´ì…˜ | ì„¤ëª… |
|------------|-------------------------------------------|
| **`@Scope`** | ë¹ˆì˜ ìŠ¤ì½”í”„ ì„¤ì • (ì‹±ê¸€í†¤, í”„ë¡œí† íƒ€ì… ë“±) |
| **`@Lazy`** | ë¹ˆì„ í•„ìš”í•  ë•Œë§Œ ìƒì„± (ì§€ì—° ë¡œë”©) |
| **`@Primary`** | ë™ì¼í•œ íƒ€ì…ì˜ ì—¬ëŸ¬ ë¹ˆì´ ìˆì„ ë•Œ ê¸°ë³¸ê°’ìœ¼ë¡œ ì§€ì • |
| **`@Qualifier`** | íŠ¹ì •í•œ ë¹ˆì„ ëª…ì‹œì ìœ¼ë¡œ ì£¼ì…í•  ë•Œ ì‚¬ìš© |


#### **ğŸ“Œ `@Scope` (ë¹ˆì˜ ë¼ì´í”„ì‚¬ì´í´ ì„¤ì •)**
ğŸ’¡ ë¹ˆì˜ **ìŠ¤ì½”í”„(ìƒëª… ì£¼ê¸°)ë¥¼ ì„¤ì •í•  ë•Œ ì‚¬ìš©**í•œë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ `singleton`ì´ì§€ë§Œ, `prototype`ìœ¼ë¡œ ë³€ê²½ ê°€ëŠ¥.

```java
@Component
@Scope("prototype") // ë§¤ë²ˆ ìƒˆë¡œìš´ ê°ì²´ ìƒì„±
public class PrototypeBean {
}
```

#### **ğŸ“Œ `@Lazy` (í•„ìš”í•  ë•Œë§Œ ë¹ˆ ìƒì„±)**
ğŸ’¡ `@Lazy`ë¥¼ ì‚¬ìš©í•˜ë©´ **ë¹ˆì„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ ë°”ë¡œ ìƒì„±í•˜ì§€ ì•Šê³ , í•„ìš”í•  ë•Œë§Œ ìƒì„±**í•œë‹¤.

```java
@Component
@Lazy
public class LazyBean {
    public LazyBean() {
        System.out.println("LazyBean ìƒì„±ë¨");
    }
}
```

âœ… `ApplicationContext.getBean(LazyBean.class)`ë¥¼ í˜¸ì¶œí•  ë•Œë§Œ ë¹ˆì´ ìƒì„±ë¨.

#### ì—¬ëŸ¬ ê°œì˜ ê°™ì€ íƒ€ì…ì˜ ë¹ˆì„ ë“±ë¡í•  ë•Œ (@Primary, @Qualifier í™œìš©)

```java
@Configuration
public class PaymentConfig {

    @Bean
    @Primary
    public PaymentService creditCardPaymentService() {
        return new CreditCardPaymentService();
    }

    @Bean
    public PaymentService paypalPaymentService() {
        return new PayPalPaymentService();
    }
}
```


```java
@Autowired
@Qualifier("paypalPaymentService")
private PaymentService paymentService;
```

### **ğŸ“Œ ê²°ë¡ **
ğŸš€ Springì—ì„œ ë¹ˆì„ ë“±ë¡í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ì€ `@Component` ê³„ì—´(ìë™ ë“±ë¡)ê³¼ `@Bean` ê³„ì—´(ìˆ˜ë™ ë“±ë¡)ë¡œ ë‚˜ë‰œë‹¤.  
ğŸš€ **ëŒ€ë¶€ë¶„ `@Service`, `@Repository`, `@Controller`ë¥¼ ì‚¬ìš©í•˜ê³ , ì„¤ì • í´ë˜ìŠ¤ì—ì„œëŠ” `@Configuration`ê³¼ `@Bean`ì„ ì‚¬ìš©í•œë‹¤.**  
ğŸš€ **Spring Bootì—ì„œëŠ” `@ComponentScan`ì„ ì‚¬ìš©í•˜ì—¬ ìë™ìœ¼ë¡œ ë¹ˆì„ ê²€ìƒ‰í•˜ê³  ë“±ë¡í•œë‹¤.**
